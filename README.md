# Apache, PHP, MySQL, RabbitMQ, Adminer, PhpMyAdmin
Docker running Apache, PHP-FPM, MySQL Adminer, RabbitMQ and PHPMyAdmin.

## Overview

1. [Install prerequisites](#install-prerequisites)

    Before installing project make sure the following prerequisites have been met.

2. [Clone the project](#clone-the-project)

    We’ll download the code from its repository on GitHub.

3. [Run the application](#run-the-application)

    By this point we’ll have all the project pieces in place.

4. [Use Docker Commands](#use-docker-commands)

    When running, you can use docker commands for doing recurrent operations.

___

## Install prerequisites

For now, this project has been mainly created for Unix `(Linux/MacOS)`. Perhaps it could work on Windows.

All requisites should be available for your distribution. The most important are :

* [Git](https://git-scm.com/downloads)
* [Docker](https://docs.docker.com/engine/installation/)
* [Docker Compose](https://docs.docker.com/compose/install/)

Check if `docker-compose` is already installed by entering the following command : 

```sh
which docker-compose
```

On Ubuntu and Debian these are available in the meta-package build-essential. On other distributions, you may need to install the GNU C++ compiler separately.

```sh
sudo apt install build-essential
```

### Images to use

* [Apache](https://hub.docker.com/_/httpd)
* [MySQL](https://hub.docker.com/_/mysql/)
* [PHP](https://hub.docker.com/_/php)
* [PHPMyAdmin](https://hub.docker.com/r/phpmyadmin/phpmyadmin/)
* [RabbitMQ](https://hub.docker.com/_/rabbitmq/)
* [adminer](https://hub.docker.com/_/adminer)

https://hub.docker.com/_/rabbitmq

This project use the following ports :

| Server     | Port |
|------------|------|
| mariadb    | 3306 |
| adminer    | 8080 |
| PHPMyAdmin | 80 |
| apache     | 80/433 |
| RabbitMQ | 15672 |

___

## Clone the project

To install [Git](http://git-scm.com/book/en/v2/Getting-Started-Installing-Git), download it and install following the instructions :

```sh
git clone https://github.com/MarshallJamesRaynor/memento-docker-use.git
```

Go to the project directory :

```sh
cd memento-docker-use
```

### Project tree
```
/memento-docker-use/
├── dev
│   ├── config
│   │       └──  apache2
│   │               └──  sites
│   ├── docker
│   │       ├── adminer
│   │       │   ├── Dockerfile
│   │       ├── apache
│   │       │   ├── Dockerfile
│   │       │   └── dev.apache.conf
│   │       ├── apache
│   │       │   └── Dockerfile
│   │       ├── mariadb
│   │       │   └── Dockerfile
│   │       ├── php
│   │       │   └── Dockerfile
│   │       ├── phpmyadmin
│   │       │   └── Dockerfile
│   │       └── rabbitmq
│   │           └── Dockerfile
│   ├── documentation
│   │       └──  command.md
│   ├── logs
│   │       └──  apache2    
│   └── scripts
│           └── hosts.sh
├── public_html
│   └── index.php
├── .editorconfig
├── .env
├── .gitignore
├── composer.json  
├── docker-compose.yml    
├── LICENSE  
├── Makefile
└── README.md
```
___

## Run the application
### Makefile

One of the main features of this project is the ability to manage the environment from the project directory itself.
The starter includes a Makefile to simplify the basic tasks:


1. Start the application :

    ```sh
    make start
    ```

    **Please wait this might take a several minutes...**
    ```sh
    sh dev/scripts/hosts.sh
    ```


3. Open your favorite browser :

    * [http://project.local](http://project.local/)
    * [http://adminer.project.local:8080](http://adminer.project.local:8080/) adminer (server:mariadb, username: default, password: secret)
    * [http://phpmyadmin.project.local](http://phpmyadmin.doodleonchain.local/) phpmyadmin (server:mariadb, username: default, password: secret)

4. Stop and clear services

    ```sh
     make stop
    ```

Here are  other several commands that you can now use from your project directory.

 ----------------------------------------------------------------------------
   Environment
 ----------------------------------------------------------------------------

- `build`                          Build the environment
- `composer`                       Install Composer dependencies from the "php" container
- `logs`                           Follow logs generated by all containers
- `logs-full`                      Follow logs generated by all containers from the containers creation
- `php`                            Open a terminal in the "php" container
- `ps`                             List all containers managed by the environment
- `start`                          Start the environment
- `stats`                          Print real-time statistics about containers ressources usage
- `stop`                           Stop the environment
- `yarn`                           Install Composer dependencies from the "php" container
- `help`                           show list command


## Help me

Any thought, feedback or (hopefully not!)